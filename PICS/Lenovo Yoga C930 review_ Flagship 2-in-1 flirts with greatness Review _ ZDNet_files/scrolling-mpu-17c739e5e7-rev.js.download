define(["jquery","version!fly/managers/debug","managers/waypoints","libs/jquery/jquery.waypoints","libs/jquery/waypoints.sticky","version!fly/components/base"],function(e,t,n){var o=(e.support.touch,t.init("scrollingMpu"));n.init(),e.widget("zdnet.scrollingMpu",e.fly.base,{options:{},_create:function(){var e=this;this._setup(),e._setupWaypoints(),o.log("Scrolling MPU init")},_setupWaypoints:function(){var t=this,n=this.$element.closest(".row"),i=this.$element.closest(".col-4");sticky=new Waypoint.Sticky({element:t.$element,stuckClass:"fixed",offset:function(){return e(document.body).hasClass("skybox-loaded")?190:90}});n.waypoint({handler:function(e){if("down"==e){o.log(this.element,"Fixing MPU to Bottom of container");var s=n.height()-i.height();o.log("Bottom Height:",s),s>t.$element.height()?(t.$element.css("bottom","-"+s+"px"),t.$element.addClass("bottom-fixed")):t.$element.removeClass("fixed")}else"up"==e&&(o.log(this.element,"Unfixing MPU from bottom of container"),t.$element.removeClass("bottom-fixed"),t.$element.css("bottom",""))},offset:function(){return e(document.body).hasClass("skybox-loaded")?-(this.element.clientHeight-t.$element.height()-200):-(this.element.clientHeight-t.$element.height()-100)}});o.log("Scrolling MPU waypoints set")}})});